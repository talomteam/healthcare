<template>
<div class="page" data-name="makeAppointment">
  <div class="navbar">
    <div class="navbar-inner sliding">
      <div class="left">
        <a href="#" class="link back">
          <i class="icon icon-back"></i>
          <span class="ios-only">Back</span>
        </a>
      </div>
      <div class="title">Make Appointment</div>
    </div>
  </div>
  <div class="page-content">
       
        
        <div class="card facebook-card">
            <div class="card-header">
              <div class="facebook-avatar"><!-- <img src="images/icon01.png" width="64" height="64"> --></div>
              <div class="facebook-name">แผนกอายุรศาสตร์ทั่วไป</div>
              <div class="facebook-date"></div>
            </div>
            <div class="card-content">
              <div class="card-content-inner">
                <p style="margin:20px">บริการตรวจวินิจฉัย รักษาผู้ป่วยโรคทั่วไป อาทิเช่น เวียนศีรษะ,  อ่อนเพลีย, ไข้หวัด, ไข้หวัดใหญ่, โรคความดันโลหิตสูง, โรคเบาหวาน, โรคเกาต์, โรคไขมันในเลือดสูง, อีสุกอีใส, ไข้เลือดออก, เริม, โรครูมาติซั่ม </p>
                <div class="block block-strong" style="text-align:center;background-image:url('images/whitepaper01.jpg')">
                    <div class="row">
                      <div class="col-33">
                        <h3>คิวที่รอ</h3>
                        <p style="font-size:2em" id="q1_wait">0</p>
                      </div>
                      <div class="col-33">
                          <h3>คิวปัจจุบัน</h3>
                          <p style="font-size:2em" id="q1_cur">0</p>
                      </div>
                      <div class="col-33">
                          <h3>คิวของฉัน</h3>
                          <p style="font-size:2em" id="q1_my">-</p>
                        </div>
                    </div>
                  </div>
<!--                 <p class="color-gray" style="margin:20px"><b> จำนวนที่รอคิว: 25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ลำดับคิวปัจจุบัน: 43 </b></p>
 -->              </div>
            </div>
            <div class="card-footer">
                <a href="#" class="link" onclick="phoneCall(9233)"><i class="f7-icons">phone_fill</i></a>
                <a href="#" class="link" @click="addQueue('q1')">จองคิวตอนนี้</a>
                <a href="#" class="link login-screen-open" data-login-screen="#my-login-screen">จองคิวล่วงหน้า</a>
              </div>
          </div> 

          <div class="card facebook-card">
              <div class="card-header">
                <div class="facebook-avatar"><!-- <img src="images/icon01.png" width="64" height="64"> --></div>
                <div class="facebook-name">แผนกระบบทางเดินอาหาร</div>
                <div class="facebook-date"></div>
              </div>
              <div class="card-content">
                <div class="card-content-inner">
                  <p style="margin:20px">ระบบทางเดินอาหาร แผลในกระเพาะอาหาร โรคกรดไหลย้อน โรคของตับ น้ำดี มะเร็งตับ ตับอักเสบ โรคตับอ่อนอักเสบ โรคเกี่ยวกับลำไส้ใหญ่ เป็นติ่งเนื้อในลำไส้ใหญ่ มะเร็งลำไส้ใหญ่ ริดสีดวง และกระเปาะในลำไส้ใหญ่</p>
                  <div class="block block-strong" style="text-align:center;background-image:url('images/whitepaper01.jpg')">
                    <div class="row">
                      <div class="col-33">
                        <h3>คิวที่รอ</h3>
                        <p style="font-size:2em" id="q2_wait">0</p>
                      </div>
                      <div class="col-33">
                          <h3>คิวปัจจุบัน</h3>
                          <p style="font-size:2em" id="q2_cur">0</p>
                      </div>
                      <div class="col-33">
                          <h3>คิวของฉัน</h3>
                          <p style="font-size:2em" id="q2_my">-</p>
                        </div>
                    </div>
                  </div>
<!--                   <p class="color-gray" style="margin:20px"><b> จำนวนที่รอคิว: 25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ลำดับคิวปัจจุบัน: 43 </b></p>
 -->                </div>
              </div>
              <div class="card-footer">
                  <a href="#" class="link" onclick="phoneCall(9233)"><i class="f7-icons">phone_fill</i></a>
                  <a href="#" class="link">จองคิวตอนนี้</a>
                  <a href="#" class="link login-screen-open" data-login-screen="#my-login-screen">จองคิวล่วงหน้า</a>
                </div>
            </div> 

            <div class="card facebook-card">
                <div class="card-header">
                  <div class="facebook-avatar"><!-- <img src="images/icon01.png" width="64" height="64"> --></div>
                  <div class="facebook-name">แผนกผิวหนังและความงาม</div>
                  <div class="facebook-date"></div>
                </div>
                <div class="card-content">
                  <div class="card-content-inner">
                    <p style="margin:20px">โรคผิวหนังทั่วไป สิว ฝ้า กระ ผมร่วง ผมบาง รังแค IPL ฟื้นฟูสภาพผิว รักษาสิว กำจัดขนหน้าแข้ง รักแร้ หนวด ลดริ้วรอย ปัญหาผิวพรรณ</p>
                    <div class="block block-strong" style="text-align:center;background-image:url('images/whitepaper01.jpg')">
                      <div class="row">
                        <div class="col-33">
                          <h3>คิวที่รอ</h3>
                          <p style="font-size:2em" id="q3_wait">0</p>
                        </div>
                        <div class="col-33">
                            <h3>คิวปัจจุบัน</h3>
                            <p style="font-size:2em" id="q3_cur">0</p>
                        </div>
                        <div class="col-33">
                            <h3>คิวของฉัน</h3>
                            <p style="font-size:2em" id="q3_my">-</p>
                          </div>
                      </div>
                    </div>
<!--                                         <p class="color-gray" style="margin:20px"><b> จำนวนที่รอคิว: 25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ลำดับคิวปัจจุบัน: 43 </b></p>
 -->                  </div>
                </div>
                <div class="card-footer">
                    <a href="#" class="link" onclick="phoneCall(9233)"><i class="f7-icons">phone_fill</i></a>
                    <a href="#" class="link">จองคิวตอนนี้</a>
                    <a href="#" class="link login-screen-open" data-login-screen="#my-login-screen">จองคิวล่วงหน้า</a>
                  </div>
              </div> 
            
              <div class="card facebook-card">
                  <div class="card-header">
                    <div class="facebook-avatar"><!-- <img src="images/icon01.png" width="64" height="64"> --></div>
                    <div class="facebook-name">แผนกโรคหัวใจ</div>
                    <div class="facebook-date"></div>
                  </div>
                  <div class="card-content">
                    <div class="card-content-inner">
                      <p style="margin:20px"> โรคหลอดเลือดหัวใจ, โรคความดันโลหิตสูง, โรคไขมันในเลือดสูง, เจ็บหน้าอก, เหนื่อย, ใจสั่น, เป็นลมหมดสติ, โรคหลอดเลือดหัวใจ, โรคลิ้นหัวใจรั่ว, โรคหัวใจพิการแต่กำเนิด, การตรวจการทำงานหัวใจด้วยคลื่นเสียงความถี่สูง, การตรวจสมรรถภาพหัวใจและโรคหลอดเลือดหัวใจด้วยการวิ่งสายพาน, การตรวจหาภาวะหัวใจเต้นผิดจังหวะด้วยเครื่องบันทึกคลื่นไฟฟ้าหัวใจ</p>
                      <div class="block block-strong" style="text-align:center;background-image:url('images/whitepaper01.jpg')">
                        <div class="row">
                          <div class="col-33">
                            <h3>คิวที่รอ</h3>
                            <p style="font-size:2em" id="q4_wait">0</p>
                          </div>
                          <div class="col-33">
                              <h3>คิวปัจจุบัน</h3>
                              <p style="font-size:2em" id="q4_cur">0</p>
                          </div>
                          <div class="col-33">
                              <h3>คิวของฉัน</h3>
                              <p style="font-size:2em" id="q4_my">-</p>
                            </div>
                        </div>
                      </div>
<!--                                             <p class="color-gray" style="margin:20px"><b> จำนวนที่รอคิว: 25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ลำดับคิวปัจจุบัน: 43 </b></p>
 -->                    </div>
                  </div>
                  <div class="card-footer">
                      <a href="#" class="link" onclick="phoneCall(9233)"><i class="f7-icons">phone_fill</i></a>
                      <a href="#" class="link">จองคิวตอนนี้</a>
                      <a href="#" class="link login-screen-open" data-login-screen="#my-login-screen">จองคิวล่วงหน้า</a>
                    </div>
                </div> 
            
                <div class="card facebook-card">
                    <div class="card-header">
                      <div class="facebook-avatar"><!-- <img src="images/icon01.png" width="64" height="64"> --></div>
                      <div class="facebook-name">แผนกภูมิแพ้</div>
                      <div class="facebook-date"></div>
                    </div>
                    <div class="card-content">
                      <div class="card-content-inner">
                        <p style="margin:20px">ภูมิแพ้ทางเดินหายใจ ภาวะแพ้อาหารและยา ภูมิแพ้ผิวหนัง และภูมิแพ้ตา
                            ทั้งเด็กและผู้ใหญ่</p>
                            <div class="block block-strong" style="text-align:center;background-image:url('images/whitepaper01.jpg')">
                              <div class="row">
                                <div class="col-33">
                                  <h3>คิวที่รอ</h3>
                                  <p style="font-size:2em" id="q5_wait">0</p>
                                </div>
                                <div class="col-33">
                                    <h3>คิวปัจจุบัน</h3>
                                    <p style="font-size:2em" id="q5_cur">0</p>
                                </div>
                                <div class="col-33">
                                  <h3>คิวของฉัน</h3>
                                  <p style="font-size:2em" id="q5_my">-</p>
                                </div>
                              
                              </div>
                            </div>
<!--                           <p class="color-gray" style="margin:20px"><b> จำนวนที่รอคิว: 25 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  ลำดับคิวปัจจุบัน: 43 </b></p>
 -->                      </div>
                    </div>
                    <div class="card-footer">
                        <a href="#" class="link" onclick="phoneCall(9233)"><i class="f7-icons">phone_fill</i></a>
                        <a href="#" class="link">จองคิวตอนนี้</a>
                        <a href="#" class="link login-screen-open" data-login-screen="#my-login-screen">จองคิวล่วงหน้า</a>
                      </div>
                  </div> 

  </div>

</div>
</template>
<script>
  return {
    methods: {
      getCookie:function(name){
        var re = new RegExp(name + "=([^;]+)");
        var value = re.exec(document.cookie);
        return (value != null) ? unescape(value[1]) : null;
      },
      addQueue: function (el) {
        var $$ = this.$;
        var app = this.$app;
        var q_wait = parseInt($$("#"+el+"_wait").text());
        var q_cur = parseInt($$("#"+el+'_cur').text());
        var q_sum = q_wait+q_cur+1
        document.cookie = ""+el+"_my="+q_sum;
        $$("#"+el+'_my').text(q_sum)
        console.log(el+"+"+q_sum)
        console.log(this.getCookie(el+"_my"))
      }
    },
    on: {
      pageInit: function (e, page) {
        var self = this;
        var today = new Date();
        var app = self.$app;
        var $$ = self.$;
        var q1 = [3,10];
        var q2 = [4,13];
        var q3 = [5,18];
        var q4 = [2,9];
        var q5 = [5,12];

        $$('#q1_wait').text(q1[0])
        $$('#q2_wait').text(q2[0])
        $$('#q3_wait').text(q3[0])
        $$('#q4_wait').text(q4[0])
        $$('#q5_wait').text(q5[0])

        $$('#q1_cur').text(q1[1])
        $$('#q2_cur').text(q2[1])
        $$('#q3_cur').text(q3[1])
        $$('#q4_cur').text(q4[1])
        $$('#q5_cur').text(q5[1])

        $$('#q1_my').text(this.getCookie("q1_my") == "" ? "-" : this.getCookie("q1_my") )
        $$('#q2_my').text(this.getCookie("q2_my") == "" ? "-" : this.getCookie("q2_my"))
        $$('#q3_my').text(this.getCookie("q3_my") == "" ? "-" : this.getCookie("q3_my"))
        $$('#q4_my').text(this.getCookie("q4_my") == "" ? "-" : this.getCookie("q4_my"))
        $$('#q5_my').text(this.getCookie("q5_my") == "" ? "-" : this.getCookie("q5_my"))


        setInterval(function(){ 

          var x = Math.floor((Math.random() * 2) + 1);

          if (x == 1)
          {
            q1[0] = q1[0]+1;
            q2[0] = q2[0]+1;
            q3[0] = q3[0]+1;
            q4[0] = q4[0]+1;
            q5[0] = q5[0]+1;
          }
          else
          {
            q1[0] = q1[0] == 0 ? 0 : q1[0]-1;
            q2[0] = q2[0] == 0 ? 0 : q2[0]-1;
            q3[0] = q3[0] == 0 ? 0 : q3[0]-1;
            q4[0] = q4[0] == 0 ? 0 : q4[0]-1;
            q5[0] = q5[0] == 0 ? 0 : q5[0]-1;

            q1[1] = q1[1]+1;
            q2[1] = q2[1]+1;
            q3[1] = q3[1]+1;
            q4[1] = q4[1]+1;
            q5[1] = q5[1]+1;
          }
          $$('#q1_wait').text(q1[0])
          $$('#q2_wait').text(q2[0])
          $$('#q3_wait').text(q3[0])
          $$('#q4_wait').text(q4[0])
          $$('#q5_wait').text(q5[0])

          $$('#q1_cur').text(q1[1])
          $$('#q2_cur').text(q2[1])
          $$('#q3_cur').text(q3[1])
          $$('#q4_cur').text(q4[1])
          $$('#q5_cur').text(q5[1])
          //console.log("xx"+ q1[1])
        }, 10000);


      },
      pageBeforeRemove() {
        var self = this;
        
      },
      
    }
  }
</script>